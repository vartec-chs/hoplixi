# Инструкция по миграции данных

## Экспорт (генерация шаблона)

1. Откройте экран "Импорт / Экспорт"
2. На вкладке "Экспорт" укажите:
   - Количество паролей
   - Количество категорий
3. Нажмите "Сгенерировать и сохранить"
4. Файл будет сохранён в папку "Загрузки" с именем `hoplixi_migration_[timestamp].json`
5. Нажмите "Открыть файл" для просмотра

## Формат файла

Файл состоит из двух разделов:

### Categories (Категории)
```json
{
  "name": "Название категории",
  "description": "Описание категории",
  "iconId": null,
  "color": "FFFFFF",
  "type": "password",
  "id": "уникальный-id-категории"
}
```

**Важно:** Не изменяйте поле `id` в категориях! Оно используется для связи с паролями.

### Passwords (Пароли)
```json
{
  "name": "Название пароля",
  "description": "Описание",
  "password": "ваш-пароль",
  "url": "https://example.com",
  "notes": "Дополнительные заметки",
  "login": "логин",
  "email": "email@example.com",
  "categoryId": "id-категории-из-списка-выше",
  "isFavorite": false
}
```

**Поля для заполнения:**
- `name` - название/заголовок пароля (обязательно)
- `description` - описание (необязательно)
- `password` - сам пароль (обязательно)
- `url` - адрес сайта (необязательно)
- `notes` - дополнительные заметки (необязательно)
- `login` - имя пользователя/логин (необязательно)
- `email` - адрес электронной почты (необязательно)
- `categoryId` - ID категории из списка categories (необязательно, но рекомендуется)
- `isFavorite` - добавить в избранное (true/false)

## Связь категорий и паролей

Пароли автоматически привязываются к категориям через поле `categoryId`. При генерации файла:
- Каждой категории присваивается уникальный ID
- Пароли равномерно распределяются по категориям
- Вы можете изменить связи, указав другой `categoryId` из списка категорий

**Пример:**
```json
{
  "categories": [
    {
      "name": "Работа",
      "id": "cat-001",
      ...
    },
    {
      "name": "Личное",
      "id": "cat-002",
      ...
    }
  ],
  "passwords": [
    {
      "name": "Gmail",
      "password": "my-secret-password",
      "categoryId": "cat-002",  // Привязан к "Личное"
      ...
    },
    {
      "name": "Корпоративная почта",
      "password": "work-password",
      "categoryId": "cat-001",  // Привязан к "Работа"
      ...
    }
  ]
}
```

## Импорт

1. После заполнения файла вернитесь в приложение
2. Перейдите на вкладку "Импорт"
3. Нажмите "Выбрать файл"
4. Выберите заполненный JSON файл
5. Проверьте предпросмотр данных:
   - Количество категорий
   - Количество паролей
   - Примеры записей
6. Нажмите "Импортировать" для подтверждения
7. Дождитесь завершения импорта

## Важные замечания

- ✅ JSON файл форматирован с отступами для удобства редактирования
- ✅ Все поля паролей изначально пустые - заполняйте своими данными
- ✅ Категории создаются с уникальными ID для связи
- ⚠️ Не изменяйте поле `id` у категорий
- ⚠️ Убедитесь, что `categoryId` в паролях существует в списке категорий
- ⚠️ Сохраняйте корректный JSON формат (проверьте запятые, кавычки, скобки)

## Пример заполнения

См. файл `assets/migration-example.json` в проекте для примера правильно заполненного файла.
