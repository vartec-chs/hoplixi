# Export Progress Dialog

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –í–∏–¥–∂–µ—Ç—ã

- **`ExportProgressDialog`** - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º —ç–∫—Å–ø–æ—Ä—Ç–∞
- **`ExportProgressOverlay`** - Overlay-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

- **`cloudExportProvider`** - –ü—Ä–æ–≤–∞–π–¥–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- **`exportDialogVisibilityProvider`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –¥–∏–∞–ª–æ–≥–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–∏–∞–ª–æ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –±–ª–∞–≥–æ–¥–∞—Ä—è `ExportProgressOverlay`, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `GoRouter`.

```dart
// –ü—Ä–æ—Å—Ç–æ –≤—ã–∑–æ–≤–∏—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
await ref.read(cloudExportProvider.notifier).exportToDropbox(
  databaseMeta,
  pathToDbFolder,
);
// –î–∏–∞–ª–æ–≥ –ø–æ–∫–∞–∂–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –†—É—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –≤—Ä—É—á–Ω—É—é:

```dart
// –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥
await ExportProgressDialog.show(context);

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤–∏–¥–∏–º–æ—Å—Ç–∏
ref.read(exportDialogVisibilityProvider.notifier).state = true;
```

## –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

–î–∏–∞–ª–æ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ `ExportState`:

- **`idle`** - –ì–æ—Ç–æ–≤ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É
- **`checking`** - –ü—Ä–æ–≤–µ—Ä–∫–∞
- **`exporting`** - –ü—Ä–æ—Ü–µ—Å—Å —ç–∫—Å–ø–æ—Ä—Ç–∞ (—Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º)
- **`fileProgress`** - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (—Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏)
- **`success`** - –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2 —Å–µ–∫)
- **`failure`** - –û—à–∏–±–∫–∞ (–æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º)
- **`warning`** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- **`canceled`** - –û—Ç–º–µ–Ω–µ–Ω–æ

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–æ—É—Ç–µ—Ä

`ExportProgressOverlay` –æ–±–µ—Ä–Ω—É—Ç –≤–æ–∫—Ä—É–≥ –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ `GoRouter`:

```dart
ShellRoute(
  builder: (context, state, child) {
    return ExportProgressOverlay(child: child);
  },
  routes: appRoutes,
)
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîí **–ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º** (`barrierDismissible: false`) –≤–æ –≤—Ä–µ–º—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚è±Ô∏è **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è** —Å –Ω–∞—á–∞–ª–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
- üìä **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ** –ø—Ä–∏ —É—Å–ø–µ—Ö–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
- ‚ùå **–û—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º** –ø—Ä–∏ –æ—à–∏–±–∫–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π
- üé® **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —Ü–≤–µ—Ç–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
