# Модульная структура универсального фильтра

Этот раздел содержит модульную реализацию универсального фильтра, разделенную на логические компоненты для удобства поддержки и развития.

## Структура файлов

### Основные файлы
- `universal_filter_modal.dart` - Главный виджет модального окна фильтра
- `modal_barrel.dart` - Файл для экспорта всех модулей

### Папки

#### `/mixins`
- `filter_helper_mixin.dart` - Mixin с вспомогательными методами для работы с фильтрами

#### `/sections`
- `password_filter_section.dart` - Секция фильтров для паролей
- `notes_filter_section.dart` - Секция фильтров для заметок  
- `otp_filter_section.dart` - Секция фильтров для OTP
- `attachments_filter_section.dart` - Секция фильтров для вложений
- `sorting_section.dart` - Секция настроек сортировки

## Архитектура

### FilterHelperMixin
Содержит общие методы для:
- Создания секций с заголовками (`buildSection`)
- Обновления поисковых запросов (`updateSearchQuery`)
- Обновления категорий и тегов (`updateCategories`, `updateTags`)
- Работы с архивными и избранными записями (`updateIsArchived`, `updateIsFavorite`)

### Секции фильтров
Каждая секция реализует:
- Специфичные для типа данных фильтры
- Валидацию ввода пользователя
- Обновление состояния фильтра через callback

### Главный виджет модального окна
Координирует работу всех секций:
- Управляет общим состоянием фильтра
- Обрабатывает применение и сброс фильтров
- Предоставляет единообразный UI для всех типов записей

## Использование

```dart
// Импорт всех модулей
import 'modal/modal_barrel.dart';

// Создание модального окна
UniversalFilterModal(
  initialFilter: currentFilter,
  onFilterApplied: (filter) {
    // Обработка применения фильтра
  },
);
```

## Преимущества модульной структуры

1. **Удобство поддержки** - каждый тип фильтров изолирован в отдельном файле
2. **Переиспользование кода** - общие методы вынесены в mixin
3. **Тестируемость** - каждый компонент можно тестировать отдельно
4. **Расширяемость** - легко добавлять новые типы фильтров
5. **Читаемость** - логика разделена на понятные блоки

## Добавление нового типа фильтра

1. Создать новый файл в `/sections` с реализацией секции
2. Добавить новый case в `UniversalFilterModal._buildTypeSpecificFilters()`
3. Экспортировать новый файл в `modal_barrel.dart`
4. При необходимости добавить новые методы в `FilterHelperMixin`

## Стubs для UI компонентов

В текущей реализации некоторые UI компоненты заменены на заглушки (stubs):
- Виджеты выбора категорий
- Виджеты выбора тегов

Эти заглушки можно заменить на реальные компоненты по мере необходимости.