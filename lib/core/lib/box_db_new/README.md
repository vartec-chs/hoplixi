# BoxDB - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º

BoxDB - —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Dart —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JSON –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å Freezed.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚ú® **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - AES-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π  
üì¶ **Freezed –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –†–∞–±–æ—Ç–∞ —Å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö  
üîÑ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ  
üîí **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `synchronized`  
üíæ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - JSONL —Ñ–æ—Ä–º–∞—Ç, –Ω–µ –¥–µ—Ä–∂–∏—Ç –≤—Å—ë –≤ –ø–∞–º—è—Ç–∏  
üîê **Selective decryption** - –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏  
üìä **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ ID  
‚ôªÔ∏è **Backup/Restore** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ  
üóúÔ∏è **–ö–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π  
üóÇÔ∏è **BoxManager** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö  
üì§ **–≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç** - –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö  
üóëÔ∏è **–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** - –£–¥–∞–ª–µ–Ω–∏–µ –±–æ–∫—Å–∞ —Å –æ—á–∏—Å—Ç–∫–æ–π –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö  
‚è∞ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –†–∞–±–æ—Ç–∞ —Å –æ–¥–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```dart
import 'package:test_box_db/test_box_db.dart';

// –°–æ–∑–¥–∞–Ω–∏–µ –ë–î
final db = await BoxDB.create<User>(
  name: 'users_db',
  basePath: 'databases',
  password: 'my_secure_password',
  fromJson: User.fromJson,
  toJson: (user) => user.toJson(),
  getId: (user) => user.id,
);

// CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
await db.insert(User(id: '1', name: 'John', email: 'john@mail.com', age: 30));
final user = await db.get('1');
await db.update(user!.copyWith(age: 31));
await db.delete('1');

await db.close();
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

```dart
import 'package:test_box_db/test_box_db.dart';

// –°–æ–∑–¥–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä
final manager = BoxManager(basePath: 'databases');

// –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ë–î
final usersDb = await manager.createBox<User>(
  name: 'users',
  fromJson: User.fromJson,
  toJson: (u) => u.toJson(),
  getId: (u) => u.id,
);

final adminsDb = await manager.createBox<User>(
  name: 'admins',
  password: 'admin_password',
  fromJson: User.fromJson,
  toJson: (u) => u.toJson(),
  getId: (u) => u.id,
);

// –†–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
await usersDb.insert(User(id: '1', name: 'Alice', email: 'alice@mail.com', age: 28));
await adminsDb.insert(User(id: '1', name: 'Admin', email: 'admin@mail.com', age: 45));

// –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
await manager.closeAll();
```

### –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

```dart
import 'package:test_box_db/test_box_db.dart';

final manager = BoxManager(basePath: 'databases');

// –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –±–æ–∫—Å
final db = await manager.createBox<User>(
  name: 'users',
  fromJson: User.fromJson,
  toJson: (u) => u.toJson(),
  getId: (u) => u.id,
);

await db.insert(User(id: '1', name: 'Alice', email: 'alice@mail.com', age: 28));
await manager.closeBox('users');

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤
final exportResult = await manager.exportBox('users');
print('–ê—Ä—Ö–∏–≤: ${exportResult.archivePath}');
print('–ö–ª—é—á: ${exportResult.encryptionKey}');

// –£–¥–∞–ª–∏—Ç—å –±–æ–∫—Å
await manager.deleteBox('users');

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞
await manager.importBox(
  boxName: 'users_restored',
  encryptionKey: exportResult.encryptionKey,
  archivePath: exportResult.archivePath,
);

await manager.closeAll();
```

### –ó–∞–ø—Ä–æ—Å—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏

```dart
import 'package:test_box_db/test_box_db.dart';

final db = await BoxDB.create<User>(
  name: 'users',
  basePath: 'databases',
  fromJson: User.fromJson,
  toJson: (u) => u.toJson(),
  getId: (u) => u.id,
);

// –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏
await db.insert(User(id: '1', name: 'Alice', email: 'alice@mail.com', age: 25));
await Future.delayed(Duration(seconds: 1));
await db.insert(User(id: '2', name: 'Bob', email: 'bob@mail.com', age: 30));
await Future.delayed(Duration(seconds: 1));
await db.insert(User(id: '3', name: 'Charlie', email: 'charlie@mail.com', age: 22));

// –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –∑–∞–ø–∏—Å–∏
final recent = await db.getRecent(limit: 2);
// [Charlie, Bob]

// –ó–∞–ø–∏—Å–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
final yesterday = DateTime.now().subtract(Duration(days: 1));
final recentDay = await db.getRecent(since: yesterday);

// –ó–∞–ø–∏—Å–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
final lastWeek = await db.getByTimeRange(
  from: DateTime.now().subtract(Duration(days: 7)),
);

// –í—Å–µ –∑–∞–ø–∏—Å–∏, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º)
final sorted = await db.getAllSortedByTime(ascending: true);

// –ü–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
final timestamp = await db.getTimestamp('1');
print('Created/Updated: $timestamp');

await db.close();
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
dart test
```

‚úÖ 68 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ (25 BoxDB + 17 BoxManager + 14 Export/Import + 12 Time Queries)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API Reference](docs/API.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [BoxManager Guide](docs/BOX_MANAGER.md) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ë–î
- [Architecture](docs/ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [Examples](docs/EXAMPLES.md) - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [Quick Start](QUICKSTART.md) - –ë—ã—Å—Ç—Ä–æ–µ –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
