# –ò—Å—Ç–æ—Ä–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª—å DatabaseEntry 
- ‚úÖ –í—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –ø–æ–ª—è: `path`, `name`, `description`, `masterPassword`, `saveMasterPassword`
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: `lastAccessed`, `createdAt` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ú–µ—Ç–æ–¥—ã: `copyWith()`, `toJson()`, `fromJson()`, `toString()`, `==`, `hashCode`

### 2. DatabaseHistoryService
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SimpleBoxManager –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HoplixiStoreManager
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `_historyService` –∏ –≥–µ—Ç—Ç–µ—Ä `historyService`
- ‚úÖ –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—ã–∑–æ–≤—ã `_recordDatabaseEntry()` 
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –∏—Å—Ç–æ—Ä–∏–∏ –≤ `createDatabase()` –∏ `openDatabase()`
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ `dispose()`

### 4. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç—ã –≤ `history.dart` –∏ `history/index.dart`
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `examples/database_history_examples.dart`
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `history/README.md`
- ‚úÖ API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤ `history/api_reference.dart`

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã DatabaseHistoryService

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `recordDatabaseAccess()` | –ó–∞–ø–∏—Å–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ë–î |
| `getAllHistory()` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ) |
| `getEntryByPath()` | –ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å—å –ø–æ –ø—É—Ç–∏ –∫ –ë–î |
| `removeEntry()` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ |
| `clearHistory()` | –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é |
| `getEntriesWithSavedPasswords()` | –ó–∞–ø–∏—Å–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏ |
| `updateDatabaseInfo()` | –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ/–æ–ø–∏—Å–∞–Ω–∏–µ |
| `getHistoryStats()` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –¥–∞—Ç—ã) |

## üîß –ú–µ—Ç–æ–¥—ã HoplixiStoreManager –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `historyService` | –ì–µ—Ç—Ç–µ—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å—É |
| `getDatabaseHistory()` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é |
| `getDatabaseHistoryEntry()` | –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å –ø–æ –ø—É—Ç–∏ |
| `removeDatabaseHistoryEntry()` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å |
| `clearDatabaseHistory()` | –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é |
| `getDatabaseHistoryStats()` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ |
| `getDatabaseHistoryWithSavedPasswords()` | –ó–∞–ø–∏—Å–∏ —Å –ø–∞—Ä–æ–ª—è–º–∏ |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–π SimpleBox
- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `saveMasterPassword = true`
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (SimpleBox)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
lib/hoplixi_store/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ database_entry.dart          # –ú–æ–¥–µ–ª—å –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ database_history_service.dart # –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–µ–π
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îî‚îÄ‚îÄ database_history_examples.dart # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ history/
‚îÇ   ‚îú‚îÄ‚îÄ index.dart                   # –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ api_reference.dart           # API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ README.md                    # –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ history.dart                     # –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Å–ø–æ—Ä—Ç
‚îî‚îÄ‚îÄ hoplixi_store_manager.dart       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –º–µ–Ω–µ–¥–∂–µ—Ä
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```dart
final manager = HoplixiStoreManager();

// –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
await manager.createDatabase(createDto);
await manager.openDatabase(openDto);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
final history = await manager.getDatabaseHistory();
```

### –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```dart
final historyService = manager.historyService;

await historyService.recordDatabaseAccess(
  path: '/path/to/db.hpx',
  name: 'My Database',
  saveMasterPassword: false,
);
```

## üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ

- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `{documents}/hoplixi/history/`
- **–§–æ—Ä–º–∞—Ç**: SimpleBox (JSONL + –∏–Ω–¥–µ–∫—Å)
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: AES —á–µ—Ä–µ–∑ SimpleBoxManager
- **–ö–ª—é—á–∏**: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –ë–î

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üßπ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- üö´ –û—à–∏–±–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –ë–î
- üîó –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤, –∫–∞–∫ –∏ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å.
